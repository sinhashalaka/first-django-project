{% extends 'basefile.html' %}
{% block shalaka %}
<form action="/goback/" method="get">
<div class="button">
<input type = "submit" name="bt" value ="home"></input>
 </div>
 </form>
        <p style="color : white ;font-size:25px" >{{posts.title}} </p>        
        <div class = "bodypart">
        <p style = "color : black">{{posts.content}}</p>
        </div>

  {% if usr.is_authenticated %}
  <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
    <div class="button">
  <input type = "button" value = {{x}} id="like">+ <span id = "demo_id">{{posts.number_likes}}</span></input>
  <script>
$("#like").click(function(){
      $.ajax({
               type: "POST",
               url: "{% url "like" %}",
               data: {'csrfmiddlewaretoken': '{{ csrf_token }}'},
               dataType: "json",
               success: function(response) {
                      document.getElementById("like").value= response.x;
                      document.getElementById("demo_id").innerHTML = response.likes_count;
                },
                error: function(rs, e) {
                      alert("Login first");
                       //alert(rs.responseText);
                }
          }); 
    })
</script>
</div>
{% else %}
<form action = "/ret/" method = "get">
<div class="button">
<input type="submit" value = {{x}} >+<span>{{posts.number_likes}}</span>
</div>
</form>
{% endif %}
  
{% endblock %}